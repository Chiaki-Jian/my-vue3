{
  "version": 3,
  "sources": ["../src/index.ts", "../src/effect.ts", "../../shared/src/index.ts", "../src/reactive.ts"],
  "sourcesContent": ["// \u5916\u9732 effect reactive \u65B9\u6CD5\nexport { effect } from './effect'\nexport { reactive } from './reactive'\n", "export function effect() { }", "export const isObject = (value) => {\n  return typeof value === 'object' && value !== null\n}", "import { isObject } from \"@vue/shared\";\n\n// \u4F18\u5316\u70B91: \u5BF9\u76F8\u540C\u6570\u636E\u8FDB\u884C\u54CD\u5E94\u5F0F\uFF0C\u4F7F\u7528weakMap\u505A\u7F13\u5B58\u4F18\u5316\n// tips: weakMap\u5C5E\u4E8E\u5F31\u5F15\u7528\uFF0C\u4E0D\u4F1A\u88AB\u8BB0\u5165\u5783\u573E\u56DE\u6536\u673A\u5236\uFF0C\u4E0D\u4F1A\u5185\u5B58\u6EA2\u51FA\nconst reactiveMap = new WeakMap()\n\n// \u4F18\u5316\u70B92: \u5F53\u524D\u4F20\u5165target\u5DF2\u7ECF\u88AB\u4EE3\u7406\u8FC7\n// \u5B9A\u4E49\u679A\u4E3E ReactiveFlags\nconst enum ReactiveFlags {\n  IS_REACTIVE = '__v_isReactive'\n}\n\nexport function reactive(target) {\n  // 1 \u5C06\u6570\u636E\u8F6C\u6362\u4E3A\u54CD\u5E94\u5F0F\u6570\u636E\uFF0C\u53EA\u80FD\u5BF9\u5BF9\u8C61\u7C7B\u578B\u8FDB\u884C\u4EE3\u7406\uFF0C\u5165\u53C2\u5FC5\u987B\u662F\u5BF9\u8C61\n  if (!isObject(target)) {\n    return\n  }\n  // \u5B9E\u73B0\u540C\u4E00\u4E2A\u5BF9\u8C61\u4EE3\u7406\u591A\u6B21\n  if (target[ReactiveFlags.IS_REACTIVE]) {\n    return target\n  }\n  // \u67E5\u770B\u662F\u5426\u5DF2\u6709\u7F13\u5B58\n  const exisitingProxy = reactiveMap.get(target)\n  // \u82E5\u6709\uFF0C\u5219\u8FD4\u56DE\n  if (exisitingProxy) {\n    return exisitingProxy\n  }\n  // tips: vue3\u7684\u54CD\u5E94\u5F0F\u5E76\u4E0D\u50CFvue2\u4E2D\uFF0C\u5BF9\u6570\u636E\u8FDB\u884C\u5C5E\u6027\u4FEE\u6539\uFF08defineProperty\uFF09\n  // proxy\u53EA\u662F\u4EE3\u7406\uFF1A\u53D6\u503C\u65F6\u89E6\u53D1 get\uFF1B\u8D4B\u503C\u65F6\u89E6\u53D1 set\n  // proxy\u4E2D get(target, propKey, receiver); set(target, propKey, value, receiver); receiver \u5373 proxy\u81EA\u8EAB\n  const proxy = new Proxy(target, {\n    get(target, key, receiver) {\n      if (key === ReactiveFlags.IS_REACTIVE) {\n        return true\n      }\n      // tips: \u6B64\u5904\u4F7F\u7528Reflect\u7684\u539F\u56E0\u662F\u4F7F\u7528Reflect.get\u4E2D\u7684receiver\u6539\u53D8\u4E86\u53D6\u503C\u65F6\u7684this\u6307\u5411\u3002\n      return Reflect.get(target, key, receiver)\n    },\n    set(target, key, value, receiver) {\n      return Reflect.set(target, key, value, receiver)\n    }\n  })\n  // \u653E\u5165\u7F13\u5B58\n  reactiveMap.set(target, proxy)\n  return proxy\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,WAAS,SAAS;AAAA,EAAE;;;ACApB,MAAM,WAAW,CAAC,UAAU;AACjC,WAAO,OAAO,UAAU,YAAY,UAAU;AAAA,EAChD;;;ACEA,MAAM,cAAc,oBAAI,QAAQ;AAQzB,WAAS,SAAS,QAAQ;AAE/B,QAAI,CAAC,SAAS,MAAM,GAAG;AACrB;AAAA,IACF;AAEA,QAAI,OAAO,qCAA4B;AACrC,aAAO;AAAA,IACT;AAEA,UAAM,iBAAiB,YAAY,IAAI,MAAM;AAE7C,QAAI,gBAAgB;AAClB,aAAO;AAAA,IACT;AAIA,UAAM,QAAQ,IAAI,MAAM,QAAQ;AAAA,MAC9B,IAAIA,SAAQ,KAAK,UAAU;AACzB,YAAI,QAAQ,oCAA2B;AACrC,iBAAO;AAAA,QACT;AAEA,eAAO,QAAQ,IAAIA,SAAQ,KAAK,QAAQ;AAAA,MAC1C;AAAA,MACA,IAAIA,SAAQ,KAAK,OAAO,UAAU;AAChC,eAAO,QAAQ,IAAIA,SAAQ,KAAK,OAAO,QAAQ;AAAA,MACjD;AAAA,IACF,CAAC;AAED,gBAAY,IAAI,QAAQ,KAAK;AAC7B,WAAO;AAAA,EACT;",
  "names": ["target"]
}
